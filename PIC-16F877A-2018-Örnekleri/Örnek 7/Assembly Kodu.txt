   LIST P=16F877A
   INCLUDE "P16F877A.INC"
   SAYAC1   EQU 0X21
   SAYAC2   EQU 0X22
   SAYI	    EQU 0X23
   TEMP     EQU 0X26
   BIRLER   EQU 0X27
   ONLAR    EQU 0X28
   YUZLER   EQU 0X29
   OKUNAN_DEGER    EQU 0X30
   ORG	0X00
   GOTO	BASLA 
   BASLA    
   BANKSEL  ADCON1
   MOVLW    0X06
   MOVWF    ADCON1  
   BANKSEL  TRISA
   MOVLW    0XFF   
   MOVWF    TRISA
   CLRF	    TRISC
   CLRF	    TRISB  
   BANKSEL  CCP1CON
   MOVLW    0X0F
   MOVWF    CCP1CON 
   BANKSEL  T2CON
   MOVLW    0X04
   MOVWF    T2CON 
   BANKSEL  PR2
   MOVLW    D'99'
   MOVWF    PR2 
   BANKSEL  CCPR1L
   MOVLW    D'50'
   MOVWF    CCPR1L 
   MOVLW    0X02
   CALL	    KOMUT_YAZ
   MOVLW    0X0F  
   CALL	    KOMUT_YAZ
   MOVLW    0X28
   CALL	    KOMUT_YAZ
   MOVLW    0X80
   CALL	    KOMUT_YAZ
KONTROL  
   BANKSEL  PORTA
   BTFSC    PORTA,4
   CALL	    ARTTIR
   BTFSC    PORTA,5
   CALL	    AZALT
   MOVF	    CCPR1L,W
   MOVWF    OKUNAN_DEGER
   GOTO	    KARAKTER
ARTTIR
   CALL	    GECIKME
   CALL	    GECIKME
   MOVLW    D'100'
   MOVWF    SAYI
   BANKSEL  CCPR1L
   MOVF	    CCPR1L,W
   SUBWF    SAYI,F
   BTFSS    STATUS,Z
   GOTO	    E2
   MOVLW    D'100'
   MOVWF    CCPR1L
   GOTO CIK
E2
   MOVLW    D'10'
   ADDWF    CCPR1L
   ;INCF	    CCPR1L
CIK
   RETURN  
AZALT
   CALL	    GECIKME
   CALL	    GECIKME
   MOVLW    D'0'
   MOVWF    SAYI
   BANKSEL  CCPR1L
   MOVF	    CCPR1L,W
   SUBWF    SAYI,F
   BTFSS    STATUS,Z
   GOTO	    E3
   MOVLW    D'0'
   MOVWF    CCPR1L
   GOTO	    CIK2
E3
   MOVLW    D'10'
   SUBWF    CCPR1L
   ;DECF	    CCPR1L
CIK2
   RETURN
KOMUT_YAZ
    MOVWF TEMP
    SWAPF TEMP,W
    CALL KOMUT_GONDER
    MOVF TEMP,W
    CALL KOMUT_GONDER
    RETURN
KOMUT_GONDER
    ANDWF 0X0F
    BANKSEL PORTB
    MOVWF PORTB
    BCF PORTB,4
    BSF PORTB,5
    CALL GECIKME
    BCF PORTB,5
    RETURN
VERI_YAZ
    MOVWF TEMP
    SWAPF TEMP,W
    CALL VERI_GONDER
    MOVF TEMP,W
    CALL VERI_GONDER
    RETURN
VERI_GONDER
    ANDWF 0X0F
    MOVWF PORTB
    BSF PORTB,4
    BSF PORTB,5
    CALL GECIKME
    BCF PORTB,5
    RETURN 
KARAKTER
    CALL OKU
    MOVLW 0X01
    CALL KOMUT_YAZ
    MOVLW A'H'
    CALL VERI_YAZ
    MOVLW A'I'
    CALL VERI_YAZ
    MOVLW A'Z'
    CALL VERI_YAZ
    MOVLW A':'
    CALL VERI_YAZ
    MOVF YUZLER,W
    CALL VERI_YAZ
    MOVF ONLAR,W
    CALL VERI_YAZ
    MOVF BIRLER,W
    CALL VERI_YAZ
    CALL GECIKME
    GOTO KONTROL
OKU
    CLRF YUZLER
    CLRF ONLAR
    CLRF BIRLER
    CLRF PORTB
    MOVF OKUNAN_DEGER,W
    MOVWF OKUNAN_DEGER   
YUZLER_ARTIR
    MOVLW D'100'
    SUBWF OKUNAN_DEGER,0
    BTFSS STATUS,C
    GOTO ONLAR_ARTIR
    MOVWF OKUNAN_DEGER
    INCF YUZLER,1
    GOTO YUZLER_ARTIR
ONLAR_ARTIR
    MOVLW D'10'
    SUBWF OKUNAN_DEGER,0
    BTFSS STATUS,C
    GOTO BIRLER_ARTIR
    MOVWF OKUNAN_DEGER
    INCF ONLAR,1
    GOTO ONLAR_ARTIR
BIRLER_ARTIR
    MOVF OKUNAN_DEGER,0
    MOVWF BIRLER
    MOVLW 0X30
    IORWF YUZLER,F
    IORWF ONLAR,F
    IORWF BIRLER,F
    RETURN      
GECIKME
   MOVLW    0XFF
   MOVWF    SAYAC1
   G2
   DECFSZ   SAYAC1
   GOTO	    G2
   MOVLW    0XFF
   MOVWF    SAYAC2
   G3
   DECFSZ   SAYAC2
   GOTO	    G3
   RETURN
   END
