    LIST	P=16F877A
    INCLUDE	"P16F877A.INC"
    
    ORG		0X00
    GEC	    EQU 0X21
    SAY	    EQU 0X22
 
    FIRST   EQU 0X23
    SECOND  EQU 0X24
    RESULT  EQU 0X25
    ISLEM_KNTRL	EQU 0X26
  
    BSF	    STATUS,5
    
    CLRF    TRISB
    CLRF    TRISC
    MOVLW   B'11110000'
    MOVWF   TRISD
    MOVLW   0X06
    MOVWF   ADCON1
    MOVLW   0XFF
    MOVWF   TRISA
    
    BCF	    STATUS,5
    CLRF    PORTA
    CLRF    PORTB
    CLRF    PORTC
    CLRF    PORTD
    CLRF    ISLEM_KNTRL
  
START
    
    CLRF    FIRST
    CLRF    SECOND
    CLRF RESULT
    CLRF PORTC
    CLRF PORTB
    CLRF ISLEM_KNTRL
    GOTO    MAIN
    
MAIN
    BSF	    PORTD,0
    BTFSC   PORTD,4
    CALL    YEDI
    BTFSC   PORTD,5
    CALL    SEKIZ
    BTFSC   PORTD,6
    CALL    DOKUZ
    BTFSC   PORTD,7
    CALL    BOLME
    BCF	    PORTD,0
    
    BSF	    PORTD,1
    BTFSC   PORTD,4
    CALL    DORT
    BTFSC   PORTD,5
    CALL    BES
    BTFSC   PORTD,6
    CALL    ALTI
    BTFSC   PORTD,7
    CALL    CARPMA
    BCF	    PORTD,1
    
    BSF	    PORTD,2
    BTFSC   PORTD,4
    CALL    BIR
    BTFSC   PORTD,5
    CALL    IKI
    BTFSC   PORTD,6
    CALL    UC
    BTFSC   PORTD,7
    CALL    CIKARMA
    BCF	    PORTD,2
    
    BSF	    PORTD,3
    BTFSC   PORTD,4
    GOTO    START
    BTFSC   PORTD,5
    CALL    SIFIR
    BTFSC   PORTD,6
    GOTO    ESITTIR
    BTFSC   PORTD,7
    CALL    TOPLAMA
    BCF	    PORTD,3
    
    GOTO    MAIN

TOPLAMA
    MOVWF   FIRST
    CLRF    ISLEM_KNTRL
    BSF	    ISLEM_KNTRL,0
    BSF	    ISLEM_KNTRL,7	    
    RETURN
CIKARMA
    MOVWF   FIRST
    CLRF    ISLEM_KNTRL
    BSF	    ISLEM_KNTRL,1
    BSF	    ISLEM_KNTRL,7
    RETURN
CARPMA
    MOVWF   FIRST
    CLRF    ISLEM_KNTRL
    BSF	    ISLEM_KNTRL,2
    BSF	    ISLEM_KNTRL,7
    RETURN
BOLME
    MOVWF   FIRST
    CLRF    ISLEM_KNTRL
    BSF	    ISLEM_KNTRL,3
    BSF	    ISLEM_KNTRL,7
    RETURN
  
ESITTIR
    BTFSC   ISLEM_KNTRL,0
    GOTO    TOPLA
    BTFSC   ISLEM_KNTRL,1
    GOTO    CIKAR
    BTFSC   ISLEM_KNTRL,2
    GOTO    CARP
    BTFSC   ISLEM_KNTRL,3
    GOTO    BOL
    GOTO    ESITTIR
    
TOPLA
    MOVF    SECOND,W
    ADDWF   FIRST,W
    MOVWF   RESULT
    GOTO    SONUCLANDIR
    
CIKAR
    MOVF SECOND,W
    SUBWF   FIRST,W
    MOVWF   RESULT
    GOTO    SONUCLANDIR
CARP
    MOVF    FIRST,W
    ETKT
    ADDWF   RESULT,F
    DECFSZ  SECOND,F
    GOTO    ETKT
    MOVF    RESULT,W
    GOTO    SONUCLANDIR
BOL
    MOVF    SECOND,W
    SUBWF   FIRST,F
    BTFSS   STATUS,C
    GOTO    ETKT2
    INCF    RESULT
    GOTO    BOL
    ETKT2
    GOTO    SONUCLANDIR

SONUCLANDIR
    MOVF    RESULT,W
    MOVWF   PORTC
    BSF PORTD,3
    BTFSS PORTD,4
    GOTO    SONUCLANDIR
    GOTO START
    
    
YEDI
    MOVLW   0X07
    MOVWF   PORTB
    MOVLW   0X07
    BTFSS ISLEM_KNTRL,7
    MOVWF FIRST
    MOVWF  SECOND
    RETURN
    
BIR
    MOVLW   0X06
    MOVWF   PORTB
    MOVLW   0X01
    BTFSS   ISLEM_KNTRL,7
    MOVWF   FIRST
    MOVWF  SECOND
    
    RETURN
 
DORT
    MOVLW   0X66
    MOVWF   PORTB
    MOVLW   0X04
    BTFSS   ISLEM_KNTRL,7
    MOVWF   FIRST
    MOVWF   SECOND
    RETURN
    
SEKIZ
    MOVLW   0X7F
    MOVWF   PORTB 
    MOVLW   0X08
    BTFSS   ISLEM_KNTRL,7
    MOVWF   FIRST
    MOVWF   SECOND
    RETURN
    
BES
    MOVLW   0X6D
    MOVWF   PORTB
    MOVLW   0X05
    BTFSS   ISLEM_KNTRL,7
    MOVWF   FIRST
    MOVWF   SECOND
    RETURN
 
IKI
    MOVLW   0X5B
    MOVWF   PORTB
    MOVLW   0X02
    BTFSS   ISLEM_KNTRL,7
    MOVWF   FIRST
    MOVWF   SECOND
    RETURN 

DOKUZ
    MOVLW   0X6F
    MOVWF   PORTB 
    MOVLW   0X09
    BTFSS   ISLEM_KNTRL,7
    MOVWF   FIRST
    MOVWF   SECOND
    RETURN 
 
ALTI
    MOVLW   0X7D
    MOVWF   PORTB
    MOVLW   0X06
    BTFSS   ISLEM_KNTRL,7
    MOVWF   FIRST
    MOVWF   SECOND
    RETURN 

UC
    MOVLW   0X4F
    MOVWF   PORTB
    MOVLW   0X03
    BTFSS   ISLEM_KNTRL,7
    MOVWF   FIRST
    MOVWF   SECOND
    RETURN
    
SIFIR
    MOVLW   0X3F
    MOVWF   PORTB 
    MOVLW   0X00
    BTFSS   ISLEM_KNTRL,7
    MOVWF   FIRST
    MOVWF   SECOND
    RETURN

END