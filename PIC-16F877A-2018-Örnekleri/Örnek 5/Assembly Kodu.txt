
    LIST P=16F877A
    INCLUDE "P16F877A.INC"   
    SAYAC	EQU 0X20
    SAYAC1   EQU 0X21
    
       	
    ORG	    0X00
    GOTO    BASLA
    ORG	    0X04
    GOTO    KESME
BASLA
    
    BANKSEL ADCON1
    MOVLW   0X06
    MOVWF   ADCON1
    MOVLW   0XFF
    MOVWF   TRISA
    MOVWF   TRISC
    CLRF    TRISD
    
    MOVLW   B'00101000'
    MOVWF   OPTION_REG
    
    MOVLW   B'11100000'
    MOVWF   INTCON
    
    MOVLW   B'00000001'
    MOVWF   PIE1
    
    BANKSEL PIR1
    CLRF   PIR1
    
    MOVLW   B'00000011'
    MOVWF   T1CON
    
    MOVLW   D'251'
    MOVWF   TMR0
    
    MOVLW   0XFF
    MOVWF   TMR1H
    MOVLW   0XE6
    MOVWF   TMR1L
    
    CLRF    PORTA
    CLRF    PORTD
    CLRF    PORTC
    
MAIN
    GOTO MAIN   

KESME
    BCF	    INTCON,GIE
    BCF	    INTCON,PEIE   
    BTFSS   INTCON,TMR0IF
    GOTO    TMR1_KNTRL
    GOTO    TMR0_KNTRL 
TMR0_KNTRL
    BCF	    INTCON,TMR0IF
    BSF	    PORTD,0
    CALL    GECIKME
    BCF	    PORTD,0
    CALL    GECIKME
    BSF	    PORTD,1
    CALL    GECIKME
    BCF	    PORTD,1
    CALL    GECIKME
    MOVLW   D'251'
    MOVWF   TMR0
    GOTO    KESME_SONU
TMR1_KNTRL
    BTFSS   PIR1,0
    GOTO    KESME_SONU
    BCF	    PIR1,0
    BSF	    PORTD,2
   CALL    GECIKME
    BCF	    PORTD,2
     CALL    GECIKME
    BSF	    PORTD,3
    CALL    GECIKME
    BCF	    PORTD,3
     CALL    GECIKME
    MOVLW   0XFF
    MOVWF   TMR1H
    MOVLW   0XE6
    MOVWF   TMR1L
    GOTO    KESME_SONU
KESME_SONU
    BSF	    INTCON,GIE
    BSF	    INTCON,PEIE
    RETFIE 


GECIKME
MOVLW 0XFF
MOVWF SAYAC
D1
MOVLW 0XFF
MOVWF SAYAC1
D2
DECFSZ SAYAC1,F
GOTO D2
DECFSZ SAYAC,F
GOTO D1
RETURN
END
    